@model List<PostInfo>

@{
    this.ViewBag.Title = "View all posts";
    this.Layout = "~/Views/Shared/_AdminLayout.cshtml";

}

@section ScriptSection
{
    <script type="text/javascript">
        $(document).ready(
            function() {

            });

    </script>
}

<div id="main">
    <h1>Manage posts</h1>
    <div class="success">
        @this.TempData["Message"]
    </div>
    
    @{
        var grid = new WebGrid(this.Model, canSort: false, rowsPerPage: 10);

    }


    @grid.GetHtml(columns: grid.Columns(grid.Column(string.Empty, "Edit", (item) => this.Html.ActionLink("Edit", "Compose", "Post", new { id = item.FileID }, null), "postLinkStyle"), grid.Column(string.Empty, "Delete", (item) => this.Html.ActionLink("Delete", "Delete", "Post", new { id = item.FileID }, null), "postLinkStyle"), grid.Column(string.Empty, "Published Date", (item) => item.Time.ToString(MvcLiteBlog.Helpers.ConfigHelper.DateFormat, System.Globalization.CultureInfo.InvariantCulture), "postDateStyle"), grid.Column(string.Empty, "Title", (item) =>
        {
            if (string.IsNullOrEmpty(item.Title))
            {
                return this.Html.ActionLink("No title", "Index", new { id = item.FileID });
            }
            else
            {
                return this.Html.ActionLink((string)item.Title, "Index", new { id = item.FileID });
            }
        }, "postTitleStyle"), grid.Column(string.Empty, "Category", (item) =>
            {
                string cat = string.Empty;
                foreach (string category in item.Categories)
                {
                    cat += MvcLiteBlog.BlogEngine.CategoryComp.GetCategoryName(category) + "<br />";
                }

                return this.Html.Raw(cat);
            }, "postCatStyle")), tableStyle: "GridContent", headerStyle: "GridHeader", rowStyle: "gridRowStyle", alternatingRowStyle: "gridAltRowStyle")

   

</div>


